/******************** WRITTEN BY ATENA DADKHAH  ***********************/
function docReady(a){"complete"===document.readyState||"interactive"===document.readyState?setTimeout(a,1):document.addEventListener("DOMContentLoaded",a)}const xmlhttp=new XMLHttpRequest,url="data.json";xmlhttp.onreadystatechange=function(){if(4==this.readyState&&200==this.status){const a=JSON.parse(this.responseText);document.getElementsByClassName("label-x").item(0).innerHTML=a.labels.x,document.getElementsByClassName("label-y").item(0).innerHTML=a.labels.y;let b=[],c=[],d=[];for(i=0;i<a.items.length;i++)b.push(a.items[i].value);b.sort(function(c,a){return c-a}),b.reverse();for(let d,e=0;e<b.length;e++)d=b.indexOf(a.items[e].value),c.push(d);for(let a=0;a<c.length;a++)d.push(c.indexOf(a));docReady(function(){if(0===document.querySelectorAll("style").length){let a=document.createElement("style");a.innerHTML=`.container{display:flex;align-items:center;font-family:sans-serif}.chart{position:relative;border:2px solid grey;flex:0 0 500px;height:300px;margin:40px}.label-x{position:absolute;bottom:-1.5em;left:50%;transform:translateX(-50%) translateY(50%)}.label-y{position:absolute;top:50%;left:-1.5em;transform:translateX(-50%) translateY(-50%) rotate(-90deg)}.info{flex:0 0 300px}`;document.querySelector("head").appendChild(a)}else document.querySelector("style").innerHTML=`.container{display:flex;align-items:center;font-family:sans-serif}.chart{position:relative;border:2px solid grey;flex:0 0 500px;height:300px;margin:40px}.label-x{position:absolute;bottom:-1.5em;left:50%;transform:translateX(-50%) translateY(50%)}.label-y{position:absolute;top:50%;left:-1.5em;transform:translateX(-50%) translateY(-50%) rotate(-90deg)}.info{flex:0 0 300px}`;const e=document.querySelector(".chart");let f=e.clientWidth/a.items.length,g=[];for(let c=0;c<b.length;c++){g.push(10*(b[c]/(b[0]/9)));const h=document.createElement("div");h.style.width=f+"px",h.style.height=e.clientHeight*(g[c]/100)+"px",h.style.backgroundColor=a.items[d[c]].color,h.style.display="inline-block",h.style.marginTop=e.clientHeight*(10/100)+"px",h.className="column",e.appendChild(h)}const h=document.querySelectorAll(".column");let j=()=>{for(i=0;i<g.length;i++)h[i].style.backgroundColor=a.items[d[i]].color},k=()=>{h.forEach(a=>{a.className="column"})};h.item(0).style.backgroundColor=a.activeColor,h.item(0).classList.add("on");let l=b=>{document.querySelector(".info h2").innerHTML=a.items[b].title,document.querySelector(".info p").innerHTML=a.items[b].description,document.querySelector(".info pre").innerHTML=a.items[b].value.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")};l(d[0]);let m=()=>{const a=document.querySelector(".on"),b=a.parentNode;let d=c.indexOf(Array.prototype.indexOf.call(b.children,a)-2);return d};h.forEach(b=>{b.onmouseenter=function(){j(),k(),this.style.backgroundColor=a.activeColor,this.classList.add("on");let b=m();l(b)}}),window.onkeydown=b=>{let c=null==document.querySelectorAll(".on")[0].nextElementSibling?document.querySelectorAll(".column")[0]:document.querySelectorAll(".on")[0].nextElementSibling,d=null!=document.querySelectorAll(".on")[0].previousElementSibling&&"label-x"!==document.querySelectorAll(".on")[0].previousElementSibling.className&&"label-y"!==document.querySelectorAll(".on")[0].previousElementSibling.className?document.querySelectorAll(".on")[0].previousElementSibling:document.querySelectorAll(".column")[h.length-1];switch(b.keyCode){case 37:j(),k(),d.style.backgroundColor=a.activeColor,d.classList.add("on");break;case 39:j(),k(),c.style.backgroundColor=a.activeColor,c.classList.add("on");}let e=m();l(e)}})}},xmlhttp.open("GET",url,!0),xmlhttp.send();